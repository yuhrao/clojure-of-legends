shadow$provide.module$node_modules$$mui$system$cssVars$useCurrentColorScheme=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}function getSystemMode(mode){if("undefined"!==typeof window&&"system"===mode)return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}function processState(state,callback){if("light"===state.mode||"system"===state.mode&&"light"===state.systemMode)return callback("light");if("dark"===state.mode||"system"===state.mode&&"dark"===state.systemMode)return callback("dark")}function getColorScheme(state){return processState(state,mode=>{if("light"===mode)return state.lightColorScheme;if("dark"===mode)return state.darkColorScheme})}function initializeValue(key,defaultValue){if("undefined"!==typeof window){var value;try{(value=
localStorage.getItem(key)||void 0)||localStorage.setItem(key,defaultValue)}catch(e){}return value||defaultValue}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(options){const {defaultMode="light",defaultLightColorScheme,defaultDarkColorScheme,supportedColorSchemes=[],modeStorageKey=_getInitColorSchemeScript.DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey=_getInitColorSchemeScript.DEFAULT_COLOR_SCHEME_STORAGE_KEY,
storageWindow="undefined"===typeof window?void 0:window}=options,joinedColorSchemes=supportedColorSchemes.join(","),[state,setState]=React.useState(()=>{const initialMode=initializeValue(modeStorageKey,defaultMode),lightColorScheme=initializeValue(`${colorSchemeStorageKey}-light`,defaultLightColorScheme),darkColorScheme=initializeValue(`${colorSchemeStorageKey}-dark`,defaultDarkColorScheme);return{mode:initialMode,systemMode:getSystemMode(initialMode),lightColorScheme,darkColorScheme}});options=getColorScheme(state);
const setMode=React.useCallback(mode=>{setState(currentState=>{if(mode===currentState.mode)return currentState;const newMode=mode?mode:defaultMode;try{localStorage.setItem(modeStorageKey,newMode)}catch(e){}return(0,_extends2.default)({},currentState,{mode:newMode,systemMode:getSystemMode(newMode)})})},[modeStorageKey,defaultMode]),setColorScheme=React.useCallback(value=>{value?"string"===typeof value?value&&!joinedColorSchemes.includes(value)?console.error(`\`${value}\` does not exist in \`theme.colorSchemes\`.`):
setState(currentState=>{const newState=(0,_extends2.default)({},currentState);processState(currentState,mode=>{try{localStorage.setItem(`${colorSchemeStorageKey}-${mode}`,value)}catch(e){}"light"===mode&&(newState.lightColorScheme=value);"dark"===mode&&(newState.darkColorScheme=value)});return newState}):setState(currentState=>{currentState=(0,_extends2.default)({},currentState);const newLightColorScheme=null===value.light?defaultLightColorScheme:value.light,newDarkColorScheme=null===value.dark?defaultDarkColorScheme:
value.dark;if(newLightColorScheme)if(joinedColorSchemes.includes(newLightColorScheme)){currentState.lightColorScheme=newLightColorScheme;try{localStorage.setItem(`${colorSchemeStorageKey}-light`,newLightColorScheme)}catch(error){}}else console.error(`\`${newLightColorScheme}\` does not exist in \`theme.colorSchemes\`.`);if(newDarkColorScheme)if(joinedColorSchemes.includes(newDarkColorScheme)){currentState.darkColorScheme=newDarkColorScheme;try{localStorage.setItem(`${colorSchemeStorageKey}-dark`,
newDarkColorScheme)}catch(error){}}else console.error(`\`${newDarkColorScheme}\` does not exist in \`theme.colorSchemes\`.`);return currentState}):setState(currentState=>{try{localStorage.setItem(`${colorSchemeStorageKey}-light`,defaultLightColorScheme),localStorage.setItem(`${colorSchemeStorageKey}-dark`,defaultDarkColorScheme)}catch(e){}return(0,_extends2.default)({},currentState,{lightColorScheme:defaultLightColorScheme,darkColorScheme:defaultDarkColorScheme})})},[joinedColorSchemes,colorSchemeStorageKey,
defaultLightColorScheme,defaultDarkColorScheme]),handleMediaQuery=React.useCallback(e=>{"system"===state.mode&&setState(currentState=>(0,_extends2.default)({},currentState,{systemMode:null!=e&&e.matches?"dark":"light"}))},[state.mode]),mediaListener=React.useRef(handleMediaQuery);mediaListener.current=handleMediaQuery;React.useEffect(()=>{const handler=(...args)=>mediaListener.current(...args),media=window.matchMedia("(prefers-color-scheme: dark)");media.addListener(handler);mediaListener.current(...[media]);
return()=>media.removeListener(handler)},[]);React.useEffect(()=>{const handleStorage=event=>{const value=event.newValue;"string"!==typeof event.key||!event.key.startsWith(colorSchemeStorageKey)||value&&!joinedColorSchemes.match(value)||(event.key.endsWith("light")&&setColorScheme({light:value}),event.key.endsWith("dark")&&setColorScheme({dark:value}));event.key!==modeStorageKey||value&&!["light","dark","system"].includes(value)||setMode(value||defaultMode)};if(storageWindow)return storageWindow.addEventListener("storage",
handleStorage),()=>storageWindow.removeEventListener("storage",handleStorage)},[setColorScheme,setMode,modeStorageKey,colorSchemeStorageKey,joinedColorSchemes,defaultMode,storageWindow]);return(0,_extends2.default)({},state,{colorScheme:options,setMode,setColorScheme})};exports.getColorScheme=getColorScheme;exports.getSystemMode=getSystemMode;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),React=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;
if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,
desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$react$index")),_getInitColorSchemeScript=require("module$node_modules$$mui$system$cssVars$getInitColorSchemeScript")}
//# sourceMappingURL=module$node_modules$$mui$system$cssVars$useCurrentColorScheme.js.map
